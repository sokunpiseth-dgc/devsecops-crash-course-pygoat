# .github/workflows/security_checks.yml

name: Security Checks

on:
  push:
    branches:
      - main  # Modify to your main branch name
  schedule:
    - cron: '0 0 * * *'  # Set your desired schedule (runs daily at midnight)

jobs:
  security_checks_job:
    runs-on: ubuntu-latest  # Choose your preferred runner

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'  # Set your desired Python version

      - name: Set up CodeQL
        uses: github/codeql-action/init@v2

      - name: Run CodeQL analysis
        run: |
          codeql database create python-code --language=python --source-root=. --output=python-database
          codeql database analyze python-database --output=results/codeql_report
          
      - name: Software Component Analysis
        run: |
          sca_tool analyze python-project --output=results/sca_report

      - name: Secrets Scanning
        run: |
          secret_tool scan python-code --output=results/secrets_report
